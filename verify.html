<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verify Student Details</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body, html {
      height: 100%;
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #2980B9, #6DD5FA, #FFFFFF);
      min-height: 100vh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px 50px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
      border: 1.5px solid #a3b1c6;
      width: 500px;
      position: relative;
    }
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    header img {
      display: block;
      margin: -60px auto 15px auto;
      width: 60px;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 2px 8px #0002;
    }
    header h1 {
      font-size: 1.8rem;
      color: #273c75;
      margin-bottom: 8px;
    }
    header p {
      color: #374765;
      font-size: 0.95rem;
    }
    .progress-bar {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      gap: 10px;
    }
    .progress-step {
      flex: 1;
      height: 4px;
      background: #ddd;
      border-radius: 2px;
      transition: 0.3s;
    }
    .progress-step.active {
      background: linear-gradient(to right, #77A1D3, #79CBCA);
    }
    .form-section {
      display: none;
    }
    .form-section.active {
      display: block;
      animation: slideIn 0.3s ease-in-out;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .form-group {
      margin-bottom: 18px;
      text-align: left;
    }
    label {
      display: block;
      margin-bottom: 6px;
      color: #374765;
      font-weight: bold;
      font-size: 14px;
    }
    input, select {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid #6b8eae;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
      color: #273c75;
      transition: 0.3s;
    }
    input:focus, select:focus {
      outline: none;
      border-color: #2980B9;
      box-shadow: 0 0 8px rgba(41, 128, 185, 0.2);
    }
    input:disabled {
      background: #f5f5f5;
      cursor: not-allowed;
    }
    input::placeholder {
      color: #999;
    }
    .read-only-field {
      background: #f5f5f5;
      color: #273c75;
      font-weight: 500;
    }
    h2 {
      color: #273c75;
      margin-bottom: 20px;
      font-size: 1.3rem;
    }
    .college-options {
      display: grid;
      gap: 12px;
      margin-top: 12px;
    }
    .college-option {
      padding: 12px 14px;
      border: 1px solid #6b8eae;
      border-radius: 6px;
      background: #fff;
      cursor: pointer;
      transition: 0.3s;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .college-option input[type="radio"] {
      width: auto;
      margin: 0;
      cursor: pointer;
      border: none;
    }
    .college-option:hover {
      border-color: #2980B9;
      background: #f0f4f8;
    }
    .college-option.selected {
      border-color: #2980B9;
      background: #e8f1f8;
    }
    .college-option span {
      color: #273c75;
      font-size: 15px;
    }
    .otp-inputs {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }
    .otp-input {
      width: 50px !important;
      height: 50px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      border: 2px solid #6b8eae !important;
      padding: 8px !important;
    }
    .verify-message {
      text-align: center;
      margin-bottom: 20px;
      color: #273c75;
      font-size: 14px;
    }
    .verify-message strong {
      color: #2980B9;
    }
    .button-group {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }
    button {
      flex: 1;
      padding: 12px 14px;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      font-family: Arial, sans-serif;
      font-size: 14px;
      cursor: pointer;
      transition: 0.3s;
      text-transform: uppercase;
    }
    .btn-primary {
      background-image: linear-gradient(to right, #77A1D3 0%, #79CBCA 51%, #77A1D3 100%);
      background-size: 200% auto;
      color: white;
      box-shadow: 0 0 20px #eee;
    }
    .btn-primary:hover:not(:disabled) {
      background-position: right center;
    }
    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .btn-secondary {
      background: #f0f4f8;
      color: #273c75;
      border: 1px solid #6b8eae;
    }
    .btn-secondary:hover {
      background: #e8f1f8;
    }
    .success-message {
      display: none;
      text-align: center;
      padding: 30px;
      background: #e8f5e9;
      border-radius: 15px;
      margin-top: 20px;
    }
    .success-message.show {
      display: block;
      animation: slideIn 0.3s ease-in-out;
    }
    .success-message h2 {
      color: #2e7d32;
      margin-bottom: 10px;
    }
    .success-message p {
      color: #388e3c;
      margin: 8px 0;
    }
    .error-message {
      color: #d32f2f;
      font-size: 13px;
      margin-top: 5px;
      display: none;
      text-align: left;
    }
    .error-message.show {
      display: block;
    }
    .resend-otp {
      text-align: center;
      margin-top: 15px;
      font-size: 13px;
      color: #374765;
    }
    .resend-otp a {
      color: #2980B9;
      text-decoration: none;
      cursor: pointer;
    }
    .resend-otp a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <a href="studentdash.html" title="Home"
    style="position:fixed; top:29px; left:29px; z-index:101; display:inline-flex; align-items:center;">
    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#ffffff" viewBox="0 0 24 24">
      <path
        d="M10.19 2.44a2.75 2.75 0 0 1 3.62 0l7.25 6.47A2.75 2.75 0 0 1 22 10.47V19a3 3 0 0 1-3 3h-2.25a.75.75 0 0 1-.75-.75V16a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5.25a.75.75 0 0 1-.75.75H5a3 3 0 0 1-3-3v-8.53a2.75 2.75 0 0 1 .94-2.06l7.25-6.47zm2.13 1.06a1.25 1.25 0 0 0-1.64 0l-7.25 6.47a1.25 1.25 0 0 0-.43.94V19a1.5 1.5 0 0 0 1.5 1.5h2.25V16a2.5 2.5 0 0 1 2.5-2.5h4A2.5 2.5 0 0 1 17.5 16v4.5H19a1.5 1.5 0 0 0 1.5-1.5v-8.53a1.25 1.25 0 0 0-.43-.94l-7.25-6.47z" />
    </svg>
  </a>

  <img src="flows.png" alt="Flows Logo"
    style="position:fixed; top:29px; right:29px; width:60px; height:auto; border-radius:10px; box-shadow:0 2px 8px #0002; z-index:100;">

  <div class="container">
    <header>
      <h1>Complete Your Verification</h1>
      <p>Verify your details and confirm booking</p>
    </header>

    <div class="progress-bar">
      <div class="progress-step active" id="progress1"></div>
      <div class="progress-step" id="progress2"></div>
      <div class="progress-step" id="progress3"></div>
    </div>

    <!-- Step 1: Student Details Verification -->
    <div class="form-section active" id="step1">
      <h2>Verify Your Details</h2>
      
      <div class="form-group">
        <label>Full Name</label>
        <input type="text" id="studentName" class="read-only-field" value="Raj Kumar" disabled>
      </div>

      <div class="form-group">
        <label>Admission Number</label>
        <input type="text" id="admissionNo" class="read-only-field" value="ADM2024001234" disabled>
      </div>

      <div class="form-group">
        <label>Email Address</label>
        <input type="email" id="email" class="read-only-field" value="raj.kumar@student.edu" disabled>
      </div>

      <div class="button-group">
        <button class="btn-primary" onclick="goToStep(2)">Next: Select College</button>
      </div>
    </div>

    <!-- Step 2: College Selection -->
    <div class="form-section" id="step2">
      <h2>Select Your College</h2>
      
      <div class="form-group">
        <label>Choose Your College:</label>
        <div class="college-options">
          <label class="college-option">
            <input type="radio" name="college" value="PILLAI COLLEGE OF ENGINEERING" onchange="selectCollege(this)">
            <span>PILLAI COLLEGE OF ENGINEERING</span>
          </label>
          <label class="college-option">
            <input type="radio" name="college" value="PILLAI COLLEGE OF ARCHITECTURE" onchange="selectCollege(this)">
            <span>PILLAI COLLEGE OF ARCHITECTURE</span>
          </label>
          <label class="college-option">
            <input type="radio" name="college" value="PILLAI COLLEGE OF ARTS COMMERCE AND SCIENCE" onchange="selectCollege(this)">
            <span>PILLAI COLLEGE OF ARTS COMMERCE AND SCIENCE</span>
          </label>
          <label class="college-option">
            <input type="radio" name="college" value="PILLAI INSTITUTE OF MANAGEMENT STUDIES AND RESEARCH" onchange="selectCollege(this)">
            <span>PILLAI INSTITUTE OF MANAGEMENT STUDIES AND RESEARCH</span>
          </label>
        </div>
        <div class="error-message" id="collegeError">Please select a college</div>
      </div>

      <div class="button-group">
        <button class="btn-secondary" onclick="goToStep(1)">Back</button>
        <button class="btn-primary" onclick="goToStep(3)">Next: Verify Mobile</button>
      </div>
    </div>

    <!-- Step 3: Mobile Verification with OTP -->
    <div class="form-section" id="step3">
      <h2>Verify Mobile Number</h2>
      
      <div class="form-group">
        <label>Mobile Number</label>
        <input type="tel" id="mobileNumber" placeholder="+91 XXXXX XXXXX" maxlength="13">
        <div class="error-message" id="mobileError">Please enter a valid mobile number</div>
      </div>

      <button class="btn-primary" onclick="sendOTP()" id="sendOtpBtn" style="width: 100%; margin-bottom: 20px;">Send OTP</button>

      <div id="otpSection" style="display: none;">
        <div class="verify-message">
          Enter the 4-digit OTP sent to <strong id="otpMobileDisplay"></strong>
        </div>

        <div class="otp-inputs">
          <input type="text" class="otp-input" id="otp1" maxlength="1" onkeyup="moveToNext(this, 'otp2')">
          <input type="text" class="otp-input" id="otp2" maxlength="1" onkeyup="moveToNext(this, 'otp3')">
          <input type="text" class="otp-input" id="otp3" maxlength="1" onkeyup="moveToNext(this, 'otp4')">
          <input type="text" class="otp-input" id="otp4" maxlength="1" onkeyup="moveToNext(this, null)">
        </div>
        <div class="error-message" id="otpError">Invalid OTP. Please try again</div>

        <div class="button-group">
          <button class="btn-secondary" onclick="goToStep(3)">Back</button>
          <button class="btn-primary" onclick="verifyOTP()" id="verifyOtpBtn">Verify OTP</button>
        </div>

        <div class="resend-otp">
          <span id="otpTimer">Resend OTP in <strong>30</strong>s</span><br>
          <a id="resendLink" style="display: none;" onclick="resendOTP()">Resend OTP</a>
        </div>
      </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
      <h2>âœ“ Verification Confirmed!</h2>
      <p>Your booking has been successfully verified.</p>
      <p style="margin-top: 15px; font-size: 13px;">
        College: <strong id="selectedCollegeName"></strong><br>
        Mobile: <strong id="verifiedMobile"></strong>
      </p>
      <button class="btn-primary" onclick="window.location.href='studentdash.html'" style="width: 100%; margin-top: 20px;">Back to Dashboard</button>
    </div>
  </div>

  <script>
    let currentStep = 1;
    let selectedCollege = null;
    let otpTimer = null;
    let timeRemaining = 30;

    function goToStep(step) {
      if (step === 2 && currentStep === 1) {
        updateProgress(2);
        currentStep = 2;
      } else if (step === 3 && currentStep === 2) {
        if (!selectedCollege) {
          document.getElementById('collegeError').classList.add('show');
          return;
        }
        document.getElementById('collegeError').classList.remove('show');
        updateProgress(3);
        currentStep = 3;
      } else if (step < currentStep) {
        updateProgress(step);
        currentStep = step;
        document.getElementById('otpSection').style.display = 'none';
        document.getElementById('sendOtpBtn').style.display = 'block';
        clearOTPInputs();
        if (otpTimer) clearInterval(otpTimer);
      }
      
      document.querySelectorAll('.form-section').forEach(el => el.classList.remove('active'));
      document.getElementById('step' + step).classList.add('active');
    }

    function updateProgress(step) {
      for (let i = 1; i <= 3; i++) {
        const el = document.getElementById('progress' + i);
        if (i <= step) {
          el.classList.add('active');
        } else {
          el.classList.remove('active');
        }
      }
    }

    function selectCollege(radio) {
      selectedCollege = radio.value;
      document.querySelectorAll('.college-option').forEach(el => {
        el.classList.remove('selected');
      });
      radio.parentElement.classList.add('selected');
    }

    function sendOTP() {
      const mobile = document.getElementById('mobileNumber').value;
      const mobileRegex = /^[+]?91?[-\s]?\d{5}[-\s]?\d{5}$/;

      if (!mobileRegex.test(mobile.replace(/\s/g, ''))) {
        document.getElementById('mobileError').classList.add('show');
        return;
      }

      document.getElementById('mobileError').classList.remove('show');
      document.getElementById('sendOtpBtn').style.display = 'none';
      document.getElementById('mobileNumber').disabled = true;
      document.getElementById('otpSection').style.display = 'block';
      document.getElementById('otpMobileDisplay').textContent = mobile;

      startOTPTimer();
      document.getElementById('otp1').focus();
    }

    function startOTPTimer() {
      timeRemaining = 30;
      updateTimerDisplay();

      otpTimer = setInterval(() => {
        timeRemaining--;
        updateTimerDisplay();

        if (timeRemaining === 0) {
          clearInterval(otpTimer);
          document.getElementById('otpTimer').style.display = 'none';
          document.getElementById('resendLink').style.display = 'inline';
        }
      }, 1000);
    }

    function updateTimerDisplay() {
      document.getElementById('otpTimer').innerHTML = `Resend OTP in <strong>${timeRemaining}</strong>s`;
    }

    function resendOTP() {
      clearOTPInputs();
      document.getElementById('otpError').classList.remove('show');
      document.getElementById('otpTimer').style.display = 'inline';
      document.getElementById('resendLink').style.display = 'none';
      startOTPTimer();
      document.getElementById('otp1').focus();
    }

    function moveToNext(current, nextId) {
      if (current.value.length === 1 && nextId) {
        document.getElementById(nextId).focus();
      }
    }

    function clearOTPInputs() {
      document.getElementById('otp1').value = '';
      document.getElementById('otp2').value = '';
      document.getElementById('otp3').value = '';
      document.getElementById('otp4').value = '';
    }

    function verifyOTP() {
      const otp = (
        document.getElementById('otp1').value +
        document.getElementById('otp2').value +
        document.getElementById('otp3').value +
        document.getElementById('otp4').value
      ).trim();

      if (otp.length !== 4) {
        document.getElementById('otpError').classList.add('show');
        return;
      }

      if (otp === '1234') {
        document.getElementById('otpError').classList.remove('show');
        document.querySelectorAll('.form-section').forEach(el => el.classList.remove('active'));
        
        document.getElementById('selectedCollegeName').textContent = selectedCollege;
        document.getElementById('verifiedMobile').textContent = document.getElementById('mobileNumber').value;
        document.getElementById('successMessage').classList.add('show');

        if (otpTimer) clearInterval(otpTimer);
      } else {
        document.getElementById('otpError').classList.add('show');
      }
    }
  </script>
</body>
</html>